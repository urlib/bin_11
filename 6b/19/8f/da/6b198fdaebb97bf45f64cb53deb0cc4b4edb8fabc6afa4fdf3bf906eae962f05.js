const t="bafybeifx7yeb55armcsxwwitkymga5xf53dxiarykms3ygqic223w5sk3m",s=window.IpfsHttpClient({host:"ipfs.io",port:443,protocol:"https"});let e=document.getElementById("checker");e.nodes=[],e.checkGateways=function(t){for(const s of t){const t=new p(this.results,s,this.nodes.length);this.nodes.push(t),this.results.append(t.tag),setTimeout(()=>t.check(),100*this.nodes.length)}},e.updateStats=function(){this.stats.update()};let i=function(t){this.parent=t,this.tag=document.getElementById("checker.stats"),this.tag.className="Stats",this.gateways=document.createElement("div"),this.gateways.textContent="0/0 tested",this.gateways.className="Gateways",this.tag.append(this.gateways),this.totals=document.createElement("div"),this.totals.textContent="0 online",this.totals.className="Totals",this.tag.append(this.totals)};i.prototype.update=function(){let t=0,s=0;for(let e of this.parent.nodes)"up"in e.status&&(e.status.up?++t:++s);this.gateways.textContent=`${t+s}/${this.parent.nodes.length} tested`,this.totals.textContent=t+" online"},e.stats=new i(e),e.results=document.getElementById("checker.results"),e.results.parent=e,e.results.checked=function(t){this.parent.updateStats(t)},e.results.failed=function(t){this.parent.updateStats(t)};let h=function(t,s){this.parent=t,this.tag=document.createElement("div"),this.tag.className="Status",this.tag.textContent="üïë"};h.prototype.check=function(){let t=this.parent.gateway.replace(":hash","bafybeietzsezxbgeeyrmwicylb5tpvf7yutrm3bxrfaoulaituhbi7q6yi"),s=Date.now(),e=`${t}?i=${this.parent.index}&now=${s}&filename=anyname.js#x-ipfs-companion-no-redirect`,i=document.createElement("script");i.src=e,document.body.append(i),i.onerror=()=>{this.up||(this.up=!1,this.tag.textContent="‚ùå",this.parent.failed())}},h.prototype.checked=function(){this.up=!0,this.tag.innerHTML="‚úÖ"};let a=function(t){this.parent=t,this.tag=document.createElement("div"),this.tag.className="Cors",this.tag.textContent="üïë"};a.prototype.check=function(){const s=this.parent.gateway.replace(":hash",t),e=Date.now();fetch(`${s}?now=${e}#x-ipfs-companion-no-redirect`).then(t=>t.text()).then(t=>{"Hello from IPFS Gateway Checker"===t.trim()?(this.parent.checked(),this.tag.textContent="‚úÖ",this.parent.tag.classList.add("cors")):this.onerror()}).catch(t=>this.onerror())},a.prototype.onerror=function(){this.tag.textContent="‚ùå"};let n=function(t){this.parent=t,this.tag=document.createElement("div"),this.tag.className="Origin",this.tag.textContent="üïë"};n.prototype.check=function(){const t=new URL(this.parent.gateway);t.pathname="/",t.hostname="bafybeibwzifw52ttrkqlikfzext5akxu7lz4xiwjgwzmqcpdzmp3n5vnbe.ipfs."+t.hostname,function(t){return new Promise((s,e)=>{const i=()=>!!h&&(clearTimeout(h),h=null,!0);let h=setTimeout(()=>{i()&&e()},15e3);const a=new Image;a.onerror=()=>{i(),e()},a.onload=()=>{i(),s()},a.src=`${t}?now=${Date.now()}&filename=1x1.png#x-ipfs-companion-no-redirect`})}(t.toString()).then(t=>{this.tag.textContent="‚úÖ",this.parent.tag.classList.add("origin"),this.parent.checked()}).catch(()=>this.onerror())},n.prototype.onerror=function(){this.tag.textContent="‚ùå"};let o=function(t,e){this.parent=t,this.tag=document.createElement("div"),this.tag.className="Flag",this.tag.textContent="";let i=!0;try{let t=localStorage.getItem(e);if(t){let s=JSON.parse(t);Date.now()-s.time<6048e5&&(i=!1,this.onResponse(s))}}catch(t){console.error("error while getting savedSTR for "+e,t)}i&&setTimeout(()=>{let t=new XMLHttpRequest;t.open("GET",`https://cloudflare-dns.com/dns-query?name=${e}&type=A`),t.setRequestHeader("accept","application/dns-json"),t.onreadystatechange=async()=>{if(4==t.readyState&&200==t.status)try{let i=JSON.parse(t.responseText),h=null;for(let t=0;t<i.Answer.length&&!h;t++){let s=i.Answer[t];1==s.type&&(h=s.data)}if(h){let t=await window.IpfsGeoip.lookup(s,h);if(t&&t.country_code){this.onResponse(t),t.time=Date.now();let s=JSON.stringify(t);localStorage.setItem(e,s)}}}catch(t){console.error("error while getting DNS A record for "+e,t)}},t.onerror=t=>{},t.send()},500*o.requests++)};o.prototype.onResponse=function(t){this.tag.style["background-image"]=`url('https://ipfs.io/ipfs/QmaYjj5BHGAWfopTdE8ESzypbuthsZqTeqz9rEuh3EJZi6/${t.country_code.toLowerCase()}.svg')`,this.tag.title=t.country_name},o.requests=0;let p=function(s,e,i){this.parent=s,this.tag=document.createElement("div"),this.tag.className="Node",this.tag.style.order=Date.now(),this.status=new h(this),this.tag.append(this.status.tag),this.cors=new a(this),this.tag.append(this.cors.tag),this.origin=new n(this),this.tag.append(this.origin.tag),this.link=document.createElement("div");let p=e.replace(":hash",t);this.link.url=new URL(p),this.link.textContent=c(this.link.url),this.link.className="Link",this.flag=new o(this,this.link.textContent),this.tag.append(this.flag.tag),this.tag.append(this.link),this.took=document.createElement("div"),this.took.className="Took",this.tag.append(this.took),this.gateway=e,this.index=i,this.checkingTime=0};function c(s){return s&&s.hostname&&(s=s.hostname.toString()),s.replace(t+".ipfs.","").replace(t+".","")}p.prototype.check=function(){this.checkingTime=Date.now(),this.status.check(),this.cors.check(),this.origin.check()},p.prototype.checked=function(){if(!this.status.up){this.status.checked(),this.parent.checked(this);let t=this.link.url,s=c(t);this.link.innerHTML=`<a title="${s}" href="${t}#x-ipfs-companion-no-redirect" target="_blank">${s}</a>`;let e=Date.now()-this.checkingTime;this.tag.style.order=e;let i=(e/1e3).toFixed(2);this.took.textContent=i+"s"}},p.prototype.failed=function(){this.parent.failed(this)};e.checkGateways(["https://ipfs.io/ipfs/:hash","https://dweb.link/ipfs/:hash","https://gateway.ipfs.io/ipfs/:hash","https://ipfs.infura.io/ipfs/:hash","https://ninetailed.ninja/ipfs/:hash","https://ipfs.globalupload.io/:hash","https://10.via0.com/ipfs/:hash","https://ipfs.eternum.io/ipfs/:hash","https://hardbin.com/ipfs/:hash","https://gateway.blocksec.com/ipfs/:hash","https://cloudflare-ipfs.com/ipfs/:hash","https://cf-ipfs.com/ipfs/:hash","https://ipns.co/ipfs/:hash","https://ipfs.mrh.io/ipfs/:hash","https://gateway.originprotocol.com/ipfs/:hash","https://gateway.pinata.cloud/ipfs/:hash","https://ipfs.doolta.com/ipfs/:hash","https://ipfs.sloppyta.co/ipfs/:hash","https://ipfs.busy.org/ipfs/:hash","https://ipfs.greyh.at/ipfs/:hash","https://gateway.serph.network/ipfs/:hash","https://jorropo.ovh/ipfs/:hash","https://jorropo.net/ipfs/:hash","https://gateway.temporal.cloud/ipfs/:hash","https://ipfs.fooock.com/ipfs/:hash","https://cdn.cwinfo.net/ipfs/:hash","https://ipfs.privacytools.io/ipfs/:hash","https://permaweb.io/ipfs/:hash","https://ipfs.stibarc.com/ipfs/:hash","https://ipfs.best-practice.se/ipfs/:hash","https://2read.net/ipfs/:hash","https://ipfs.2read.net/ipfs/:hash","https://storjipfs-gateway.com/ipfs/:hash","https://ipfs.runfission.com/ipfs/:hash","https://trusti.id/ipfs/:hash","https://apac.trusti.id/ipfs/:hash","https://ipfs.overpi.com/ipfs/:hash","https://ipfs.lc/ipfs/:hash","https://ipfs.leiyun.org/ipfs/:hash","https://ipfs.ink/ipfs/:hash","https://ipfs.jes.xxx/ipfs/:hash","https://ipfs.oceanprotocol.com/ipfs/:hash","https://d26g9c7mfuzstv.cloudfront.net/ipfs/:hash","https://ipfsgateway.makersplace.com/ipfs/:hash","https://gateway.ravenland.org/ipfs/:hash","https://ipfs.smartsignature.io/ipfs/:hash","https://ipfs.funnychain.co/ipfs/:hash","https://ipfs.telos.miami/ipfs/:hash","https://robotizing.net/ipfs/:hash","https://ipfs.mttk.net/ipfs/:hash","https://ipfs.fleek.co/ipfs/:hash","https://ipfs.jbb.one/ipfs/:hash","https://ipfs.yt/ipfs/:hash","https://jacl.tech/ipfs/:hash","https://hashnews.k1ic.com/ipfs/:hash","https://ipfs.vip/ipfs/:hash","https://ipfs.k1ic.com/ipfs/:hash","https://ipfs.drink.cafe/ipfs/:hash","https://ipfs.azurewebsites.net/ipfs/:hash","https://gw.ipfspin.com/ipfs/:hash","https://ipfs.kavin.rocks/ipfs/:hash"]);